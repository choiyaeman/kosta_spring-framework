<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.customerMapper">
  <insert id="insert" parameterType="Customer">
INSERT INTO customer(id, pwd, name, buildingno, addr1)
VALUES (#{id},#{pwd},#{name},#{postal.buildingno},#{addr1})
  </insert>
  <select id="selectById" parameterType="string">
  SELECT 
id
,pwd
,name
,postal.buildingno "postal.buildingno"
,zipcode "postal.zipcode" 
,sido ||' ' || NVL(sigungu, ' ') ||' ' || NVL(eupmyun, ' ')  "postal.city"  
,doro || ' ' || DECODE(NVL(building2,'0'), building1, building1 ||'-' || building2) "postal.doro" 
,NVL(building, ' ') "postal.building"
,addr1
FROM   customer c LEFT OUTER JOIN postal postal ON (c.buildingno=postal.buildingno) 
WHERE id=?
  </select>
</mapper>